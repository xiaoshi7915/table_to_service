# 服务管理脚本使用说明

## 脚本位置
`/opt/table_to_service/service_manager.sh`

## 快速使用（推荐）

项目根目录提供了快捷命令 `s`，可以直接使用：

```bash
cd /opt/table_to_service
./s start      # 启动所有服务
./s stop       # 停止所有服务
./s restart    # 重启所有服务
./s status     # 查看服务状态
```

## 完整使用方法

### 启动所有服务
```bash
cd /opt/table_to_service
./service_manager.sh start
```

### 停止所有服务
```bash
./service_manager.sh stop
```

### 重启所有服务
```bash
./service_manager.sh restart
```

### 查看服务状态
```bash
./service_manager.sh status
```

### 单独管理服务

#### 仅启动后端服务
```bash
./service_manager.sh start-backend
```

#### 仅停止后端服务
```bash
./service_manager.sh stop-backend
```

#### 仅启动前端服务
```bash
./service_manager.sh start-frontend
```

#### 仅停止前端服务
```bash
./service_manager.sh stop-frontend
```

## 功能特点

1. **进程管理**
   - 自动记录进程ID到 `.backend.pid` 和 `.frontend.pid` 文件
   - 启动前检查服务是否已运行，避免重复启动
   - 停止时优雅关闭，必要时强制终止

2. **日志记录**
   - 后端日志: `logs/backend.log`
   - 前端日志: `logs/frontend.log`
   - 所有输出都会记录到日志文件

3. **后台运行**
   - 服务在后台运行，不占用终端
   - 使用 `nohup` 确保服务在终端关闭后继续运行

4. **状态检查**
   - 启动后自动检查服务是否成功启动
   - 提供详细的状态信息

## 服务地址

- **后端服务**: http://121.36.205.70:8300
- **前端服务**: http://121.36.205.70:3003
- **API文档**: http://121.36.205.70:8300/docs

## 注意事项

1. **首次使用**: 确保已安装依赖
   - 后端: 虚拟环境已创建并安装依赖
   - 前端: `node_modules` 已安装

2. **端口占用**: 如果端口被占用，脚本会提示错误

3. **日志查看**: 如果服务启动失败，查看对应的日志文件

4. **权限问题**: 确保脚本有执行权限 (`chmod +x service_manager.sh`)

## 示例操作流程

```bash
# 1. 进入项目目录
cd /opt/table_to_service

# 2. 启动所有服务
./service_manager.sh start

# 3. 查看服务状态
./service_manager.sh status

# 4. 查看日志（如果需要）
tail -f logs/backend.log
tail -f logs/frontend.log

# 5. 停止所有服务
./service_manager.sh stop
```

